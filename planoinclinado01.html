<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Plano Inclinado - Triángulo ABC</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
</head>
<body>
  <script>
    let angulo; // Ángulo en A
    let AB = 300;
    let A, B, C;
    let boton;

    function setup() {
      createCanvas(600, 400);
      angleMode(DEGREES);
      generarNuevoTriangulo();

      boton = createButton('Otro ejemplo');
      boton.position(20, 20);
      boton.mousePressed(generarNuevoTriangulo);
    }

    function draw() {
      background(255);
      stroke(0);
      fill(230);

      // Triángulo rectángulo ABC
      triangle(A.x, A.y, B.x, B.y, C.x, C.y);

      // Etiquetas
      dibujarVertices();

      // Bloque sobre el plano inclinado (AC)
      drawBloqueSobrePlano();

      // Mostrar ángulo
      noStroke();
      fill(0);
      textSize(16);
      text("Ángulo en A: " + angulo + "°", 20, 60);
    }

    function generarNuevoTriangulo() {
      // Elegir ángulo múltiplo de 5 entre 5 y 85
      let posiblesAngulos = [];
      for (let a = 5; a <= 85; a += 5) {
        posiblesAngulos.push(a);
      }
      angulo = random(posiblesAngulos);

      // Punto A (a la derecha, centrado verticalmente)
      A = createVector(width - 100, height / 2);

      // Punto B (a la izquierda de A, misma altura)
      B = createVector(A.x - AB, A.y);

      // Punto C (vertical arriba desde B, según ángulo)
      let altura = tan(angulo) * AB;
      C = createVector(B.x, B.y - altura); // hacia arriba
    }

    function drawBloqueSobrePlano() {
      push();
      translate(A.x, A.y);
      let dx = C.x - A.x;
      let dy = C.y - A.y;
      let theta = atan2(dy, dx);
      rotate(theta);
      fill(200, 0, 0);
      rect(40, -20, 60, 40);
      pop();
    }

    function dibujarVertices() {
      fill(0);
      textSize(14);
      noStroke();
      text('A', A.x + 5, A.y - 5);
      text('B', B.x - 15, B.y - 5);
      text('C', C.x - 10, C.y + 15);
    }
  </script>
</body>
</html>
