<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Plano Inclinado Centrado</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
</head>
<body>
  <script>
    let angulo;  // Ángulo en A
    let AB = 300; // longitud horizontal
    let B, A, C;
    let boton;

    function setup() {
      createCanvas(600, 400);
      angleMode(DEGREES);
      generarNuevoTriangulo();

      boton = createButton('Otro ejemplo');
      boton.position(20, 20);
      boton.mousePressed(generarNuevoTriangulo);
    }

    function draw() {
      background(255);
      stroke(0);
      fill(230);

      // Dibujar triángulo
      triangle(A.x, A.y, B.x, B.y, C.x, C.y);

      // Dibujar bloque sobre el plano inclinado AC
      drawBloqueSobrePlano();

      // Mostrar ángulo
      noStroke();
      fill(0);
      textSize(16);
      text("Ángulo en A: " + nf(angulo, 1, 1) + "°", 20, 60);
    }

    function generarNuevoTriangulo() {
      angulo = random(5, 85); // ángulo en A

      // Punto A: a la derecha del canvas, verticalmente centrado
      A = createVector(width - 100, height / 2);

      // Punto B: a la izquierda de A, mismo nivel
      B = createVector(A.x - AB, A.y);

      // Punto C: vertical hacia abajo desde B
      let altura = tan(angulo) * AB;
      C = createVector(B.x, B.y + altura);
    }

    function drawBloqueSobrePlano() {
      push();
      translate(A.x, A.y);
      let dx = C.x - A.x;
      let dy = C.y - A.y;
      let theta = atan2(dy, dx);
      rotate(theta);
      fill(200, 0, 0);
      rect(40, -20, 60, 40); // bloque encima del plano
      pop();
    }
  </script>
</body>
</html>
